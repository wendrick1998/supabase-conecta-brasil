
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#0B0B0B" />
    <meta name="description" content="Vendah+: O CRM que transforma leads em clientes. Gerencie leads, pipeline de vendas e comunicação multicanal." />
    <title>Vendah+</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- PWA Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    
    <!-- iOS PWA Specific Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Vendah+">
    
    <!-- iOS Smart App Banner - incentivo para instalação mesmo sem App Store -->
    <meta name="apple-itunes-app" content="app-id=123456789, app-argument=https://vendah.app">
    
    <!-- iOS Splash Screens - Enhanced for modern devices -->
    <!-- iPhone 14 Pro Max (1290px × 2796px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPhone 14 Pro (1179px × 2556px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPhone 14, iPhone 13 Pro, iPhone 13, iPhone 12 Pro, iPhone 12 (1170px × 2532px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPhone 13 mini, iPhone 12 mini, iPhone 11 Pro (1125px × 2436px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPhone 11, iPhone XR (828px × 1792px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPhone 8 Plus, iPhone 7 Plus, iPhone 6s Plus, iPhone 6 Plus (1242px × 2208px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPhone 8, iPhone 7, iPhone 6s, iPhone 6 (750px × 1334px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPad Pro 12.9" (2048px × 2732px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPad Pro 11" (1668px × 2388px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPad Pro 10.5" (1668px × 2224px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    <!-- iPad, iPad Air, iPad mini (1536px × 2048px) -->
    <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" href="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png">
    
    <!-- iOS Touch Feel -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    
    <!-- PWA manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <style>
      /* Prevent iOS text inflation */
      html {
        -webkit-text-size-adjust: 100%;
        overflow-x: hidden;
      }
      
      /* Hide scrollbars while maintaining functionality */
      ::-webkit-scrollbar {
        width: 0px;
        background: transparent;
      }
      
      /* Adjust for iOS safe areas (notch, home indicator) */
      body {
        padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      }
      
      /* Disable user selection to feel more app-like */
      * {
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        user-select: none;
      }
      
      /* Allow selection in input fields */
      input, textarea {
        user-select: text;
      }
      
      /* Add bouncy overscroll like native iOS apps */
      .ios-scroll {
        -webkit-overflow-scrolling: touch;
      }
      
      /* Prevent elastic scrolling at the body level */
      html, body {
        overscroll-behavior-y: none;
        height: 100%;
        margin: 0;
      }
      
      /* Splash screen styling - enhanced with animation */
      .splash-screen {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #0B0B0B;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 9999;
        transition: opacity 0.5s ease-out;
      }
      
      .splash-logo {
        width: 120px;
        height: 120px;
        animation: pulse 1.5s infinite ease-in-out;
      }
      
      @keyframes pulse {
        0% { transform: scale(0.95); opacity: 0.8; }
        50% { transform: scale(1.05); opacity: 1; }
        100% { transform: scale(0.95); opacity: 0.8; }
      }
      
      /* Active touch feedback for buttons and interactive elements */
      .active-touch {
        opacity: 0.7;
        transform: scale(0.98);
        transition: all 0.1s ease-out;
      }
      
      /* Improved loading indicator */
      .loading-dots {
        display: flex;
        justify-content: center;
        margin-top: 20px;
      }
      
      .loading-dots .dot {
        width: 10px;
        height: 10px;
        margin: 0 5px;
        border-radius: 50%;
        background-color: white;
        opacity: 0.3;
      }
      
      .loading-dots .dot:nth-child(1) {
        animation: dot-fade 1.5s infinite ease-in-out;
      }
      
      .loading-dots .dot:nth-child(2) {
        animation: dot-fade 1.5s infinite ease-in-out 0.5s;
      }
      
      .loading-dots .dot:nth-child(3) {
        animation: dot-fade 1.5s infinite ease-in-out 1s;
      }
      
      @keyframes dot-fade {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 1; }
      }
      
      /* Haptic feedback class for elements that use vibration */
      .haptic {
        touch-action: manipulation;
      }
      
      /* Native-like dark mode support */
      @media (prefers-color-scheme: dark) {
        :root {
          color-scheme: dark;
        }
        
        body {
          background-color: #0B0B0B;
          color: #FFFFFF;
        }
      }
      
      /* iOS-friendly focus states */
      button:focus, a:focus, [role="button"]:focus {
        outline: none;
      }
    </style>
  </head>
  <body class="dark">
    <!-- Enhanced splash screen with loading dots -->
    <div id="splash-screen" class="splash-screen">
      <img src="/lovable-uploads/5cd87705-c40b-4d5a-9a43-57cff2564fbf.png" alt="Vendah+" class="splash-logo">
      <p style="color: white; margin-top: 20px; font-family: 'Poppins', sans-serif;">Carregando</p>
      <div class="loading-dots">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
    </div>
    
    <div id="root"></div>
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Enhanced splash screen removal with proper transition -->
    <script>
      // Remove splash screen after content loads with smoother transition
      window.addEventListener('load', function() {
        setTimeout(function() {
          const splash = document.getElementById('splash-screen');
          if (splash) {
            splash.style.opacity = '0';
            setTimeout(function() {
              splash.style.display = 'none';
            }, 500);
          }
          
          // Add iOS-specific touch feedback
          setupTouchFeedback();
          
          // Show installation tutorial for iOS users who haven't installed the app
          checkAndShowInstallationTutorial();
        }, 1000); // Show splash for at least 1 second
      });
      
      // Add iOS class to body if on iOS device
      if (/iPad|iPhone|iPod/.test(navigator.userAgent) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) {
        document.body.classList.add('ios-device');
      }
      
      // Check if user is in standalone mode (installed) or browser
      function checkAndShowInstallationTutorial() {
        // Check if on iOS
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                     (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
        
        // Check if not already installed as PWA
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches || 
                            (window.navigator.standalone === true);
                            
        // Only show tutorial if on iOS, not installed, and hasn't seen it before
        if (isIOS && !isStandalone && !localStorage.getItem('installTutorialShown')) {
          // Set a 50% chance to show tutorial (A/B testing)
          if (Math.random() > 0.5) {
            setTimeout(showIOSInstallTutorial, 5000);
            // Mark as shown
            localStorage.setItem('installTutorialShown', 'true');
          }
        }
      }
      
      // Show iOS installation tutorial
      function showIOSInstallTutorial() {
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4';
        modal.innerHTML = `
          <div class="bg-surface p-6 rounded-lg max-w-md w-full">
            <h3 class="text-lg font-bold mb-4">Instale o Vendah+ no seu iPhone</h3>
            <ol class="list-decimal pl-5 space-y-2 mb-4">
              <li>Toque no botão de compartilhamento <span class="inline-block w-5 h-5 bg-blue-500 text-white rounded text-xs flex items-center justify-center">↑</span></li>
              <li>Role para baixo e toque em "Adicionar à Tela de Início"</li>
              <li>Confirme tocando em "Adicionar"</li>
            </ol>
            <p class="text-sm mb-4">Instale para ter uma experiência completa com acesso offline e notificações!</p>
            <button class="w-full bg-vendah-purple text-white py-2 rounded-md" id="close-modal">Entendi</button>
          </div>
        `;
        document.body.appendChild(modal);
        
        // Add event listener to close button
        document.getElementById('close-modal')?.addEventListener('click', () => {
          document.body.removeChild(modal);
        });
      }
      
      // Setup touch feedback for buttons and interactive elements
      function setupTouchFeedback() {
        const interactiveElements = document.querySelectorAll('button, a, [role="button"], .interactive');
        
        interactiveElements.forEach(element => {
          element.addEventListener('touchstart', function() {
            this.classList.add('active-touch');
          });
          
          ['touchend', 'touchcancel'].forEach(event => {
            element.addEventListener(event, function() {
              this.classList.remove('active-touch');
            });
          });
        });
      }
      
      // Detect network status changes
      window.addEventListener('online', function() {
        // Show online status notification
        showNotification('Você está online novamente', 'success');
      });
      
      window.addEventListener('offline', function() {
        // Show offline status notification
        showNotification('Você está offline. Alguns recursos podem ficar indisponíveis.', 'warning');
      });
      
      // Simple notification function
      function showNotification(message, type) {
        const notification = document.createElement('div');
        notification.className = 'pwa-notification ' + (type || 'info');
        notification.style.cssText = 'position: fixed; top: env(safe-area-inset-top, 0); left: 0; right: 0; padding: 16px; background-color: ' + 
          (type === 'success' ? '#4CAF50' : type === 'warning' ? '#FF9800' : '#2196F3') + 
          '; color: white; text-align: center; z-index: 9999; font-family: "Poppins", sans-serif; transform: translateY(-100%); transition: transform 0.3s ease-out;';
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        // Show notification
        setTimeout(() => {
          notification.style.transform = 'translateY(0)';
          
          // Auto-hide after 3 seconds
          setTimeout(() => {
            notification.style.transform = 'translateY(-100%)';
            
            // Remove from DOM after transition
            setTimeout(() => {
              document.body.removeChild(notification);
            }, 300);
          }, 3000);
        }, 10);
      }
    </script>
  </body>
</html>
